<!-- Imports polymer -->
<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../paper-dialog/paper-dialog.html">
<link rel="import" href="../paper-drawer-panel/paper-drawer-panel.html">
<link rel="import" href="../paper-button/paper-button.html">
<link rel="import" href="../paper-dialog-behavior/paper-dialog-behavior.html">
<link rel="import" href="../paper-header-panel/paper-header-panel.html">
<link rel="import" type="css" href="cookies-legal-element.css">

<!-- Defines element markup -->
<dom-module id="cookies-legal-element">
    <template>
    <template is="dom-if" if={{show}}>
        <paper-header-panel class="flex">
            <paper-toolbar>
              <div>
                This site uses cookies. By using this site, you agree to our use of cookies.
                </div>
                <paper-button raised on-click="confirm">Accept</paper-button>
                <template is="dom-if" if={{showButton}}>
                    <paper-button raised on-click="showReadMore">Read more</paper-button>
                </template>
                
              </div>
            </paper-toolbar>

          </paper-header-panel>
          <template is="dom-if" if={{readMore}}>
                    <paper-material>
                    En cookie är en liten fil som webbplatser som du besöker skickar till din webbläsare. På så sätt kan webbplatsen komma ihåg information om ditt besök, som vilket språk du vill använda och andra inställningar. Det underlättar vid nästa besök, och webbplatsen blir mer användbar. Cookies spelar en viktig roll. Utan dem skulle du förmodligen bli frustrerad när du använder webben.

Vi använder cookies för flera ändamål. Vi använder dem till exempel för att spara dina SafeSearch-inställningar, för att kunna visa mer relevanta annonser, för att räkna hur många besökare en viss sida har och för att hjälpa dig att logga in på våra tjänster. Vi använder även cookies för att skydda dina data.
</paper-material>
      </template>
      </template>
    </template>
</dom-module>

<!-- Registers custom element -->
<script>
Polymer({
    is: 'cookies-legal-element',

    behaviors: [
      //Polymer.PaperDialogBehavior
    ],
    confirm: function () {
        localStorage.acceptCookies = true;
        this.show = false;
        console.log('accept cookies');
    },
    showReadMore: function () {
        this.showButton=false;
        this.readMore = true;
    },
    // Fires when an instance of the element is created
    created: function() {

       
    },
    // Fires when the local DOM has been fully prepared
    ready: function() {

        // TODO: remove this!
        //delete localStorage.acceptCookies;
        

        this.showButton=true;

        if(!localStorage.acceptCookies){
            this.show = true;
        }
    },

    // Fires when the element was inserted into the document
    attached: function() {},

    // Fires when the element was removed from the document
    detached: function() {},

    // Fires when an attribute was added, removed, or updated
    attributeChanged: function(attr, oldVal, newVal) {
    }
});
</script>
